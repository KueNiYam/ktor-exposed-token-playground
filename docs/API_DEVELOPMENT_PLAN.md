# API ê°œë°œ ê³„íš

## ğŸ“‹ ì™„ë£Œëœ ì‘ì—…

### 1. í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ êµ¬í˜„ âœ…
- **ë„ë©”ì¸ ê³„ì¸µ**: `Tokenizer` sealed interface, `Token`, `TokenizedText`, `TokenizerMeta`
- **ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ**: `TokenizeUseCase`, `ListMethodsUseCase`
- **ì–´ëŒ‘í„° ê³„ì¸µ**: `CliAdapter` (Primary), `TokenizerRegistry` (Infrastructure)
- **íŒ¨í‚¤ì§€ êµ¬ì¡°**: í‘œì¤€ Gradle ë””ë ‰í† ë¦¬ ë ˆì´ì•„ì›ƒ ì ìš©

### 2. í†µí•© í† í° ëª¨ë¸ âœ…
- `Token(value, score?, type?)` - ë‹¨ì¼ ëª¨ë¸ë¡œ ëª¨ë“  í† í°í™” ê²°ê³¼ í‘œí˜„
- `TokenizedText` - ì‹¤í–‰ì‹œê°„, ë©”íƒ€ë°ì´í„° í¬í•¨í•œ í†µí•© ê²°ê³¼ ëª¨ë¸
- `TokenizerMeta` - í† í°í™” ë°©ë²• ë©”íƒ€ë°ì´í„° (id, name, description)

### 3. CLI ì¸í„°í˜ì´ìŠ¤ âœ…
- 14ê°€ì§€ í† í°í™” ë°©ë²• ì§€ì›
- JSON/í…ìŠ¤íŠ¸ ì¶œë ¥ í˜•ì‹
- ìƒ‰ìƒ ì½”ë”©ëœ í„°ë¯¸ë„ ì¶œë ¥
- ì‹¤í–‰ì‹œê°„ ì¸¡ì • ë° ë©”íƒ€ë°ì´í„° ì œê³µ

### 4. í…ŒìŠ¤íŠ¸ ë° ë¹Œë“œ ì‹œìŠ¤í…œ âœ…
- JUnit 5 í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ (8ê°œ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œ)
- Gradle ë¹Œë“œ ì‹œìŠ¤í…œ
- JAR íŒ¨í‚¤ì§• ë° ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„: REST API ê°œë°œ

### Phase 1: Ktor ì„œë²„ ì„¤ì •
```kotlin
// ëª©í‘œ êµ¬ì¡°
src/main/kotlin/
â”œâ”€â”€ adapters/
â”‚   â”œâ”€â”€ primary/
â”‚   â”‚   â”œâ”€â”€ cli/CliAdapter.kt          âœ… ì™„ë£Œ
â”‚   â”‚   â””â”€â”€ web/WebAdapter.kt          ğŸ”„ ê°œë°œ ì˜ˆì •
â”‚   â””â”€â”€ secondary/...
â”œâ”€â”€ application/...                     âœ… ì™„ë£Œ
â”œâ”€â”€ domain/...                         âœ… ì™„ë£Œ
â””â”€â”€ infrastructure/...                 âœ… ì™„ë£Œ
```

**ì‘ì—… í•­ëª©:**
- [ ] Ktor ì˜ì¡´ì„± ì¶”ê°€ (`build.gradle.kts`)
- [ ] `WebAdapter` í´ë˜ìŠ¤ ìƒì„±
- [ ] ê¸°ë³¸ ì„œë²„ ì„¤ì • ë° ë¼ìš°íŒ…

### Phase 2: API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

#### 2.1 í† í°í™” API
```http
POST /api/tokenize
Content-Type: application/json

{
  "text": "ì•ˆë…•í•˜ì„¸ìš” Hello World!",
  "methods": [1, 2, 14],  // ì„ íƒì , ê¸°ë³¸ê°’: ëª¨ë“  ë°©ë²•
  "format": "detailed"     // "simple" | "detailed"
}
```

**ì‘ë‹µ í˜•ì‹:**
```json
{
  "input": "ì•ˆë…•í•˜ì„¸ìš” Hello World!",
  "results": [
    {
      "id": 1,
      "name": "ê³µë°± ê¸°ì¤€",
      "description": "ê³µë°± ë¬¸ìë¡œ ë‹¨ì–´ ë¶„ë¦¬",
      "token_count": 3,
      "execution_time_ms": 2,
      "tokens": [
        {"value": "ì•ˆë…•í•˜ì„¸ìš”"},
        {"value": "Hello"},
        {"value": "World!"}
      ]
    }
  ]
}
```

#### 2.2 ë°©ë²• ëª©ë¡ API
```http
GET /api/methods
```

**ì‘ë‹µ:**
```json
{
  "methods": [
    {
      "id": 1,
      "name": "ê³µë°± ê¸°ì¤€",
      "description": "ê³µë°± ë¬¸ìë¡œ ë‹¨ì–´ ë¶„ë¦¬"
    }
  ],
  "total_count": 10
}
```

#### 2.3 í—¬ìŠ¤ì²´í¬ API
```http
GET /api/health
```

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥

#### 3.1 ë°°ì¹˜ ì²˜ë¦¬
```http
POST /api/tokenize/batch
{
  "texts": ["í…ìŠ¤íŠ¸1", "í…ìŠ¤íŠ¸2"],
  "methods": [1, 2]
}
```

#### 3.2 ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ
```http
POST /api/tokenize/stream
Content-Type: application/json
Accept: text/event-stream
```

#### 3.3 ìºì‹± ë° ì„±ëŠ¥ ìµœì í™”
- Redis ìºì‹± (ì„ íƒì )
- ì‘ë‹µ ì••ì¶•
- ìš”ì²­ ì œí•œ (Rate Limiting)

### Phase 4: ë¬¸ì„œí™” ë° ë°°í¬

#### 4.1 API ë¬¸ì„œí™”
- [ ] OpenAPI/Swagger ìŠ¤í™ ìƒì„±
- [ ] ì¸í„°ë™í‹°ë¸Œ API ë¬¸ì„œ (`/docs` ì—”ë“œí¬ì¸íŠ¸)
- [ ] ì‚¬ìš© ì˜ˆì œ ë° ê°€ì´ë“œ

#### 4.2 ì»¨í…Œì´ë„ˆí™”
```dockerfile
# Dockerfile ìƒì„± ì˜ˆì •
FROM openjdk:17-jre-slim
COPY build/libs/tokenizer.jar app.jar
EXPOSE 8080
CMD ["java", "-jar", "app.jar"]
```

#### 4.3 ë°°í¬ ì„¤ì •
- [ ] Docker Compose ì„¤ì •
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLI Client    â”‚    â”‚   HTTP Client   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CliAdapter    â”‚    â”‚   WebAdapter    â”‚  â—„â”€â”€ Primary Adapters
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Application     â”‚  â—„â”€â”€ Use Cases
          â”‚ - TokenizeUC    â”‚
          â”‚ - ListMethodsUC â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Domain          â”‚  â—„â”€â”€ Business Logic
          â”‚ - Tokenizer     â”‚
          â”‚ - Token         â”‚
          â”‚ - TokenizedText â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Infrastructure  â”‚  â—„â”€â”€ Secondary Adapters
          â”‚ - TokenizerReg  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ê¸°ìˆ  ìŠ¤íƒ

### í˜„ì¬ ìŠ¤íƒ âœ…
- **ì–¸ì–´**: Kotlin 1.9+
- **ë¹Œë“œ**: Gradle 8.5
- **í…ŒìŠ¤íŠ¸**: JUnit 5
- **ì•„í‚¤í…ì²˜**: Hexagonal Architecture

### ì¶”ê°€ ì˜ˆì • ğŸ”„
- **ì›¹ í”„ë ˆì„ì›Œí¬**: Ktor 2.3+
- **ì§ë ¬í™”**: Kotlinx Serialization
- **ë¡œê¹…**: Logback + SLF4J
- **ë¬¸ì„œí™”**: OpenAPI/Swagger
- **ì»¨í…Œì´ë„ˆ**: Docker

## ğŸ¯ ì„±ê³µ ì§€í‘œ

1. **ê¸°ëŠ¥ì„±**: ëª¨ë“  CLI ê¸°ëŠ¥ì´ APIë¡œ ë™ì¼í•˜ê²Œ ì œê³µ
2. **ì„±ëŠ¥**: í‰ê·  ì‘ë‹µì‹œê°„ < 100ms (ë‹¨ì¼ í† í°í™” ìš”ì²­)
3. **ì•ˆì •ì„±**: 99.9% ê°€ìš©ì„±, ì ì ˆí•œ ì—ëŸ¬ í•¸ë“¤ë§
4. **ì‚¬ìš©ì„±**: ì§ê´€ì ì¸ API ì„¤ê³„, ì™„ì „í•œ ë¬¸ì„œí™”
5. **í™•ì¥ì„±**: ìƒˆë¡œìš´ í† í°í™” ë°©ë²• ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥

## ğŸ“… ì˜ˆìƒ ì¼ì •

- **Week 1**: Ktor ì„¤ì • ë° ê¸°ë³¸ ì—”ë“œí¬ì¸íŠ¸
- **Week 2**: ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™”
- **Week 3**: ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸
- **Week 4**: ë°°í¬ ì¤€ë¹„ ë° ìµœì¢… ê²€ì¦
